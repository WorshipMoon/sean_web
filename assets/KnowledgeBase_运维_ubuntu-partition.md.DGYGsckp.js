import{_ as i,c as a,a2 as e,o as t}from"./chunks/framework.GMKO7RMU.js";const u=JSON.parse('{"title":"Ubuntu partition 扩展分区","description":"","frontmatter":{"title":"Ubuntu partition 扩展分区"},"headers":[],"relativePath":"KnowledgeBase/运维/ubuntu-partition.md","filePath":"KnowledgeBase/运维/ubuntu-partition.md","lastUpdated":1737862402000}'),l={name:"KnowledgeBase/运维/ubuntu-partition.md"};function n(d,s,o,p,h,r){return t(),a("div",null,s[0]||(s[0]=[e('<h2 id="ubuntu-22-扩展分区" tabindex="-1">Ubuntu 22 扩展分区 <a class="header-anchor" href="#ubuntu-22-扩展分区" aria-label="Permalink to &quot;Ubuntu 22 扩展分区&quot;">​</a></h2><p>这台vm虚拟机中需要扩展的是 /dev/mapper/ubuntu--vg-ubuntu--lv</p><p>一阶段</p><ol><li><p><strong>扩展物理卷</strong>：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pvresize</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda3</span></span></code></pre></div></li><li><p><strong>扩展逻辑卷</strong>：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lvextend</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +100%FREE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/mapper/ubuntu--vg-ubuntu--lv</span></span></code></pre></div></li><li><p><strong>扩展文件系统</strong>：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> resize2fs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/mapper/ubuntu--vg-ubuntu--lv</span></span></code></pre></div></li><li><p><strong>验证磁盘空间</strong>：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">df</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span></code></pre></div></li></ol><h3 id="解释" tabindex="-1">解释 <a class="header-anchor" href="#解释" aria-label="Permalink to &quot;解释&quot;">​</a></h3><ul><li><strong><code>pvresize</code></strong>：扩展物理卷以包含新的未分配空间。</li><li><strong><code>lvextend</code></strong>：扩展逻辑卷以使用新的物理卷空间。<code>-l +100%FREE</code> 表示使用所有可用的自由空间。</li><li><strong><code>resize2fs</code></strong>：扩展文件系统以使用新的逻辑卷空间。</li></ul><p>到这里成功就完成了。 如果以上步骤未能扩展分区未能成功，物理卷sda3的大小未能扩展到新的磁盘大小 使用如下步骤：</p><h3 id="使用-fdisk删除并重新创建-sda3-分区" tabindex="-1">使用 <code>fdisk</code>删除并重新创建 <code>sda3</code> 分区** <a class="header-anchor" href="#使用-fdisk删除并重新创建-sda3-分区" aria-label="Permalink to &quot;使用 `fdisk`删除并重新创建 `sda3` 分区**&quot;">​</a></h3><ol><li><p><strong>备份重要数据</strong>：</p><ul><li>在进行任何分区操作之前，建议备份重要数据，以防数据丢失。</li></ul></li><li><p><strong>启动 <code>fdisk</code></strong>：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fdisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda</span></span></code></pre></div></li><li><p><strong>删除并重新创建 <code>sda3</code> 分区</strong>：</p><ul><li>在 <code>fdisk</code> 提示符下，输入以下命令： <ul><li><code>p</code>：打印当前分区表，确认分区信息。</li><li><code>d</code>：删除 <code>sda3</code> 分区（注意：这只是删除分区条目，不会删除实际数据）。</li><li><code>n</code>：创建新分区。选择主分区（<code>p</code>），然后选择分区号（通常是 <code>3</code>），按回车接受默认的起始扇区，然后按回车接受默认的结束扇区以使用所有可用空间。</li><li>Do you want to remove the signature? [Y]es/[N]o: <code>N</code></li><li><code>w</code>：保存更改并退出 <code>fdisk</code>。</li></ul></li></ul></li><li><p><strong>重启虚拟机</strong>：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reboot</span></span></code></pre></div></li><li><p><strong>再次使用之前的一阶段的步骤即可</strong></p></li></ol>',9)]))}const g=i(l,[["render",n]]);export{u as __pageData,g as default};
